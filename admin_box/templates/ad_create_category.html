{% extends 'includes/main.html' %}
{% block content %}
  <div class="content-wrapper">
    <div class="container-xxl flex-grow-1 container-p-y">

      <div class="col-xl">
                  <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                      <h5 class="mb-0">ADD CATEGORY</h5>
                      <span  id="spanPreview" style="display: inline-block; padding: 7px; color: #ffffff; background-color: black; border-radius: 10px;">
                        <i id="iconPreview"></i>
                        <b><p id="namePreview" style="display: inline; margin-left: 5px;"></p></b>
                      </span>
                    </div>
                    <div class="card-body">
                      {% if edit %}
                      <form method="post" action="{% url 'cat_update' %}" >
                        {% csrf_token %}
                        <input type="text" value='{{edit.catSlug}}' name='slugs' hidden>
                        <div class="mb-3">
                          <label class="form-label" for="basic-default-fullname">Category Name</label>
                          <input type="text" value="{{edit.catName}}" maxlength="60" class="form-control" id="basic-default-fullname" placeholder="Web development" name="cat_name">
                        </div>

                        <div class="mb-3">
                          <label class="form-label" for="basic-default-company">Category Icon</label>
                          <input type="text" value="{{edit.catIcon}}" class="form-control" id="basic-default-company" name='cat_icon' placeholder="fa fa-dashboard">
                        </div>

                        

                        <div class="mb-3">
                          <label class="form-label" for="basic-default-phone">Color</label>
                          <input value="{{edit.catColor}}" type="color" name="cat_color" id="basic-default-phone" class="form-control phone-mask">
                        </div>

                        <div class="mb-3">
                          <label class="form-label" for="basic-default-message">Descreption</label>
                          <textarea id="basic-default-message"  class="form-control" name="cat_desc" placeholder="Write a simple discreption for the Category">{{edit.catDescription}}</textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">Send</button>
                      </form>
                      {% else  %}
                      <form method="post" action="{% url 'save_category' %}" >
                        {% csrf_token %}
                        <div class="mb-3">
                          <label class="form-label" for="basic-default-fullname">Category Name</label>
                          <input type="text" maxlength="60" class="form-control" id="basic-default-fullname" placeholder="Web development" name="cat_name">
                        </div>

                        <div class="mb-3">
                          <label class="form-label" for="basic-default-company">Category Icon</label>
                          <input type="text" class="form-control" id="basic-default-company" name='cat_icon' placeholder="fa fa-dashboard">
                        </div>

                        

                        <div class="mb-3">
                          <label class="form-label" for="basic-default-phone">Color</label>
                          <input type="color" name="cat_color" id="basic-default-phone" class="form-control phone-mask">
                        </div>

                        <div class="mb-3">
                          <label class="form-label" for="basic-default-message">Descreption</label>
                          <textarea id="basic-default-message" class="form-control" name="cat_desc" placeholder="Write a simple discreption for the Category"></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">Send</button>
                      </form>
                      {% endif %}
                      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


                    </div>
                  </div>
                </div>  

    </div>
  </div>

  <script>
    $(document).ready(function () {
      // Update category name preview
      $('#basic-default-fullname').on('input', function () {
        const categoryName = $(this).val();
        $('#namePreview').text(categoryName); // Update the text
      });
  
      // Update category icon preview
      $('#basic-default-company').on('input', function () {
        const categoryIcon = $(this).val();
        $('#iconPreview').attr('class', categoryIcon); // Update the class for the icon
      });
      
      $('#basic-default-phone').on('input', function () {
        const selectedColor = $(this).val(); // Get the selected color
        $('#spanPreview').css('background-color', selectedColor); // Update the background color of the preview element
      });
    });
  </script>
{% endblock %}

